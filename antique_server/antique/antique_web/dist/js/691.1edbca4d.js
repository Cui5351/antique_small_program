"use strict";(self["webpackChunkoil"]=self["webpackChunkoil"]||[]).push([[691],{2568:function(e,t,a){a.d(t,{Aq:function(){return P},Hq:function(){return V},IC:function(){return y},L7:function(){return S},M1:function(){return s},Mc:function(){return p},OD:function(){return I},P:function(){return q},PI:function(){return b},Pg:function(){return E},Qt:function(){return C},Sn:function(){return g},TH:function(){return i},U3:function(){return B},UK:function(){return j},VG:function(){return c},Xt:function(){return _},Y8:function(){return u},YI:function(){return l},YS:function(){return d},al:function(){return m},bU:function(){return k},dO:function(){return v},g2:function(){return O},j6:function(){return W},jE:function(){return K},lE:function(){return L},pH:function(){return x},pZ:function(){return h},pr:function(){return F},qC:function(){return R},qu:function(){return f},ry:function(){return A},sD:function(){return n},si:function(){return o},tb:function(){return D},vO:function(){return U},vW:function(){return w},xM:function(){return G}});var r=a(9455);const l=e=>r.A.get("/StoreItem/list2",{params:{...e}}),u=e=>r.A.get("/StoreItem/findById",{params:{...e}}),n=()=>r.A.get("/Store/getStoreNames"),o=e=>r.A.post("/StoreItem/add",e),i=e=>r.A.post("/StoreItem/edit",e),s=e=>r.A.post("/StoreItem/delete",e),c=e=>r.A.post("/Store/add",e),d=e=>r.A.get("/StoreItem/GetBuyGoodsAll",{params:{...e}}),p=e=>r.A.put("/StoreItem/editBuyGoodsState2",e),m=e=>r.A.get("/Store/getAllStoreAccount",{params:{...e}}),f=e=>r.A.get("/Store/getStoreById",{params:{...e}}),g=e=>r.A.put("/Store/editStoreById",e),A=e=>r.A.delete("/Store/DelStore",{params:{...e}}),v=e=>r.A.post("/Antique/AddAntique",e),b=e=>r.A.get("/Antique/GetAntiqueAll",{params:{...e}}),k=e=>r.A.post("/Antique/login",e),y=e=>r.A.get("/Antique/GetAntiqueCollect",{params:{...e}}),S=e=>r.A.post("/Antique/AddAntiqueCollect",e),F=e=>r.A.get("/Antique/FindAntiqueById",{params:{...e}}),q=e=>r.A.get("/Antique/GetCollectById",{params:{...e}}),_=e=>r.A.put("/Antique/EditCollectById",e),h=e=>r.A.put("/Antique/DelAntiqueCollect",e),I=e=>r.A.put("/Antique/EditAntiqueById",e),C=e=>r.A.get("/Antique/GetStoreForAntique",{params:{...e}}),G=e=>r.A.put("/Antique/DelAntiqueBindStore",e),V=e=>r.A.put("/Antique/AddAntiqueBindStore",e),w=e=>r.A.get("/Antique/GetMyBindStoreById",{params:{...e}}),B=e=>r.A.delete("/StoreItem/DeleteGoodsPic",{params:{...e}}),E=e=>r.A.delete("/Antique/DelAntique",{params:{...e}}),x=e=>r.A.delete("/Store/DeleteStoreCarouselPic",{params:{...e}}),U=e=>r.A.get("/Community/GetAllCommunity",{params:{...e}}),D=e=>r.A.post("/Community/UpdateCommunityStatus",e),K=e=>r.A.delete("/Community/DeleteCommunity",{params:{...e}}),O=e=>r.A.get("/Finance/GetYearStoreStatics",{params:{...e}}),R=e=>r.A.get("/Finance/GetBillsStatistics",{params:{...e}}),W=e=>r.A.get("/Finance/GetTotalStoreStatics",{params:{...e}}),j=e=>r.A.get("/Finance/GetYearStoreStaticsByYear",{params:{...e}}),P=e=>r.A.get("/StoreItem/buyGoodsAllToExcel",{params:{...e},responseType:"blob"}),L=e=>r.A.get("/StoreItem/buyGoodsToExcelById",{params:{...e},responseType:"blob"})},4691:function(e,t,a){a.r(t),a.d(t,{default:function(){return k}});a(4114),a(8992),a(4520),a(3949),a(1454);var r=a(6768),l=a(4232),u=a(144),n=a(4588),o=a(2568),i=a(9685),s=a(7477),c=a(1219);const d={class:"page"},p={style:{margin:"10px 0"}},m={style:{margin:"10px 0 20px 0"}},f={style:{margin:"10px 0 20px 0"}},g=["src"];var A={__name:"myStoreInfo",setup(e){const t=(0,u.Kh)({name:[{required:!0,message:"请输入商铺名",trigger:"blur"}],src:[{required:!0,message:"请上传图片",trigger:"blur"}],description:[{required:!0,message:"请输入描述",trigger:"blur"}],account:[{required:!0,message:"请输入账户",trigger:"blur"}],password:[{required:!1,message:"请输入密码",trigger:"blur"}],tel:[{required:!0,message:"请输入手机号码",trigger:"blur",validator:(e,t,a)=>{""==t?a(new Error("请输入手机号码")):/^1[3456789]\d{9}$/.test(t)?a():a(new Error("请输入正确的手机号码"))}}],carousel:[{required:!0,message:"请上传轮播图",trigger:"blur"}]}),a=JSON.parse(n.A.ls.get("user")),A=(0,u.KR)(null),v=(0,u.Kh)({id:"",name:"",src:"",description:"",account:"",password:"",tel:"",carousel:[]}),b=e=>{null!=e.uid&&(0,o.pH)({id:e.uid}).then((e=>{h.value.carousel=h.value.carousel.filter((t=>t.src!=e.data))}))},k=e=>{console.log(e,"file carousel"),h.value.carousel.push({src:e.data})},y=(0,u.KR)([]),S=()=>{(0,o.qu)({id:a.id}).then((e=>{Object.keys(v).forEach((t=>{v[t]=e.data[t]}))})).catch((e=>{console.log(e)}))},F=()=>{(0,o.qu)({id:a.id}).then((e=>{Object.keys(v).forEach((t=>{if("carousel"==t)return v[t]=e.data[t]?.map((e=>({src:e.src,id:e.id})))||[],void(h.value.carousel=e.data[t]?.map((e=>({src:e.src,id:e.id})))||[]);v[t]=e.data[t],h.value[t]=e.data[t]})),y.value.splice(0,y.value.length),y.value.push(...e.data.carousel.map((e=>({uid:e.id,url:e.src})))),q.value=!0,console.log(h,"form")})).catch((e=>{console.log(e)}))},q=(0,u.KR)(!1),_=()=>{q.value=!1,h.value.name="",h.value.src="",h.value.description="",h.value.account="",h.value.password="",h.value.tel="",y.value.splice(0,y.value.length)},h=(0,u.KR)({name:"",src:"",description:"",account:"",password:"",tel:""}),I=e=>"image/jpeg"!=e.type&&"image/png"!=e.type?(c.nk.error("Avatar picture must be JPG | PNG format!"),!1):!(e.size/1024/1024>4)||(c.nk.error("Avatar picture size can not exceed 4MB!"),!1),C=e=>{h.value.src=e.data},G=()=>{F()},V=()=>{A.value.validate((e=>{if(e)if(null==v.id||""==v.id)c.nk.warning("请重新登录");else{let e={};if(Object.keys(h.value).forEach((t=>{v[t]!=h.value[t]&&(e[t]=h.value[t])})),0==Object.keys(e).length)return q.value=!1,void _();(0,o.Sn)({...e,id:v.id}).then((e=>{console.log(e),q.value=!1,S(),_()}))}}))};return S(),(e,a)=>{const n=(0,r.g2)("el-image"),o=(0,r.g2)("el-button"),c=(0,r.g2)("el-col"),S=(0,r.g2)("el-carousel-item"),F=(0,r.g2)("el-carousel"),w=(0,r.g2)("el-card"),B=(0,r.g2)("el-row"),E=(0,r.g2)("el-main"),x=(0,r.g2)("el-input"),U=(0,r.g2)("el-form-item"),D=(0,r.g2)("el-mention"),K=(0,r.g2)("el-icon"),O=(0,r.g2)("el-upload"),R=(0,r.g2)("el-form"),W=(0,r.g2)("el-dialog"),j=(0,r.g2)("el-container");return(0,r.uX)(),(0,r.CE)("div",d,[(0,r.bF)(j,{class:"main-container"},{default:(0,r.k6)((()=>[(0,r.bF)(E,{class:"main-content"},{default:(0,r.k6)((()=>[(0,r.bF)(B,{class:"info-row"},{default:(0,r.k6)((()=>[(0,r.bF)(c,{span:8},{default:(0,r.k6)((()=>[(0,r.bF)(n,{src:v.src,class:"museum-avatar",fit:"cover"},null,8,["src"]),(0,r.Lk)("p",p,"账号："+(0,l.v_)(v.account),1),(0,r.bF)(o,{type:"primary",onClick:G},{default:(0,r.k6)((()=>a[7]||(a[7]=[(0,r.eW)("编辑信息")]))),_:1})])),_:1}),(0,r.bF)(c,{span:16},{default:(0,r.k6)((()=>[(0,r.bF)(F,{interval:4e3,type:"card",height:"230px",style:{"margin-bottom":"20px"},loop:""},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(v.carousel,(e=>((0,r.uX)(),(0,r.Wv)(S,{key:e.id},{default:(0,r.k6)((()=>[(0,r.bF)(n,{src:e.src},null,8,["src"])])),_:2},1024)))),128))])),_:1}),(0,r.bF)(w,{class:"museum-info-card"},{default:(0,r.k6)((()=>[(0,r.Lk)("h2",null,(0,l.v_)(v.name),1),(0,r.Lk)("p",m,"联系电话："+(0,l.v_)(v.tel),1),(0,r.Lk)("p",f,"商铺简介："+(0,l.v_)(v.description),1)])),_:1})])),_:1})])),_:1})])),_:1}),(0,r.bF)(W,{title:"编辑商铺",modelValue:q.value,"onUpdate:modelValue":a[6]||(a[6]=e=>q.value=e),onClose:_},{footer:(0,r.k6)((()=>[(0,r.bF)(o,{onClick:_},{default:(0,r.k6)((()=>a[8]||(a[8]=[(0,r.eW)("取 消")]))),_:1}),(0,r.bF)(o,{type:"primary",onClick:V},{default:(0,r.k6)((()=>a[9]||(a[9]=[(0,r.eW)("确 定")]))),_:1})])),default:(0,r.k6)((()=>[(0,r.bF)(R,{model:h.value,"label-width":"100px",rules:t,ref_key:"form",ref:A},{default:(0,r.k6)((()=>[(0,r.bF)(U,{label:"商铺名",prop:"name"},{default:(0,r.k6)((()=>[(0,r.bF)(x,{modelValue:h.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>h.value.name=e),placeholder:"请输入店铺名称"},null,8,["modelValue"])])),_:1}),(0,r.bF)(U,{label:"账户",prop:"account"},{default:(0,r.k6)((()=>[(0,r.bF)(x,{modelValue:h.value.account,"onUpdate:modelValue":a[1]||(a[1]=e=>h.value.account=e),placeholder:"请输入账户"},null,8,["modelValue"])])),_:1}),(0,r.bF)(U,{label:"密码",prop:"password"},{default:(0,r.k6)((()=>[(0,r.bF)(x,{modelValue:h.value.password,"onUpdate:modelValue":a[2]||(a[2]=e=>h.value.password=e),placeholder:"请输入密码"},null,8,["modelValue"])])),_:1}),(0,r.bF)(U,{label:"手机号码",prop:"tel"},{default:(0,r.k6)((()=>[(0,r.bF)(x,{modelValue:h.value.tel,"onUpdate:modelValue":a[3]||(a[3]=e=>h.value.tel=e),placeholder:"请输入手机号码"},null,8,["modelValue"])])),_:1}),(0,r.bF)(U,{label:"描述",prop:"description"},{default:(0,r.k6)((()=>[(0,r.bF)(D,{type:"textarea",rows:4,modelValue:h.value.description,"onUpdate:modelValue":a[4]||(a[4]=e=>h.value.description=e),placeholder:"请输入店铺描述"},null,8,["modelValue"])])),_:1}),(0,r.bF)(U,{label:"头像",prop:"src"},{default:(0,r.k6)((()=>[(0,r.bF)(O,{class:"avatar-uploader",action:(0,u.R1)(i.p)+"/admin/upload",name:"storeAvatar","auto-upload":"false","show-file-list":!1,"on-success":C,"before-upload":I},{default:(0,r.k6)((()=>[h.value.src?((0,r.uX)(),(0,r.CE)("img",{key:0,src:h.value.src,class:"avatar"},null,8,g)):((0,r.uX)(),(0,r.Wv)(K,{key:1,class:"avatar-uploader-icon"},{default:(0,r.k6)((()=>[(0,r.bF)((0,u.R1)(s.FWt))])),_:1}))])),_:1},8,["action"])])),_:1}),(0,r.bF)(U,{label:"轮播图",prop:"carousel"},{default:(0,r.k6)((()=>[(0,r.bF)(O,{"file-list":y.value,"onUpdate:fileList":a[5]||(a[5]=e=>y.value=e),action:(0,u.R1)(i.p)+"/admin/upload",name:"storeAvatar","list-type":"picture-card","on-remove":b,limit:"5","on-success":k},{default:(0,r.k6)((()=>[(0,r.bF)(K,null,{default:(0,r.k6)((()=>[(0,r.bF)((0,u.R1)(s.FWt))])),_:1})])),_:1},8,["file-list","action"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])),_:1})])}}},v=a(1241);const b=(0,v.A)(A,[["__scopeId","data-v-4e549f19"]]);var k=b}}]);
//# sourceMappingURL=691.1edbca4d.js.map