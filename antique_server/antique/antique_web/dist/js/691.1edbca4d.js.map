{"version":3,"file":"js/691.1edbca4d.js","mappings":"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","sources":["webpack://oil/./src/util/api.js","webpack://oil/./src/view/myStoreInfo/myStoreInfo.vue","webpack://oil/./src/view/myStoreInfo/myStoreInfo.vue?2b29"],"sourcesContent":["import instance from \"@/request/request\";\r\n// 加载门店信息\r\n\r\n// /loadStoreInfo\r\nconst loadStoreInfo = (data) => instance.get(\"/StoreItem/list2\",{params:{...data}})\r\n\r\n// /loadStoreInfoById\r\nconst loadStoreInfoById = (data) => instance.get(\"/StoreItem/findById\",{params:{...data}})\r\n\r\n// GetStoreNames\r\nconst GetStoreNames = () => instance.get(\"/Store/getStoreNames\")\r\n// /AddStoreItem\r\nconst AddStoreItem = (data) => instance.post(\"/StoreItem/add\",data)\r\n// /EditStoreItem\r\nconst EditStoreItem = (data) => instance.post(\"/StoreItem/edit\",data)\r\n// delete\r\nconst DeleteStoreItem = (data) => instance.post(\"/StoreItem/delete\",data)\r\n\r\nconst AddStore = (data) => instance.post(\"/Store/add\",data)\r\n\r\n// StoreItem/buyGoodsAll\r\nconst buyGoodsAll = (data) => instance.get(\"/StoreItem/GetBuyGoodsAll\",{params:{...data}})\r\n\r\n// editBuyGoodsState2\r\nconst editBuyGoodsState2 = (data) => instance.put(\"/StoreItem/editBuyGoodsState2\",data)\r\n\r\n// getAllStoreAccount\r\nconst getAllStoreAccount = (data) => instance.get(\"/Store/getAllStoreAccount\",{params:{...data}})\r\n\r\n// getStoreById\r\nconst getStoreById = (data) => instance.get(\"/Store/getStoreById\",{params:{...data}})\r\n\r\n// /editStoreById\r\nconst editStoreById = (data) => instance.put(\"/Store/editStoreById\",data)\r\n\r\n// /DelStore\r\nconst DelStore = (data) => instance.delete(\"/Store/DelStore\",{params:{...data}})\r\n\r\n// Antique/AddAntique\r\nconst AddAntique = (data) => instance.post(\"/Antique/AddAntique\",data)\r\n\r\n// /Antique/GetAntiqueAll\r\nconst GetAntiqueAll = (data) => instance.get(\"/Antique/GetAntiqueAll\",{params:{...data}})\r\n\r\n// /Antique/login\r\nconst AntiqueLogin = (data) => instance.post(\"/Antique/login\",data)\r\n\r\n// /Antique/GetAntiqueCollect\r\nconst GetAntiqueCollect = (data) => instance.get(\"/Antique/GetAntiqueCollect\",{params:{...data}})\r\n\r\n// Antique/AddAntiqueCollect\r\nconst AddAntiqueCollect = (data) => instance.post(\"/Antique/AddAntiqueCollect\",data)\r\n\r\n// Antique/FindAntiqueById\r\nconst FindAntiqueById = (data) => instance.get(\"/Antique/FindAntiqueById\",{params:{...data}})\r\n\r\n// Antique/GetCollectById\r\nconst GetCollectById = (data) => instance.get(\"/Antique/GetCollectById\",{params:{...data}})\r\n\r\n// Antique/EditCollectById\r\nconst EditCollectById = (data) => instance.put(\"/Antique/EditCollectById\",data)\r\n\r\n// Antique/DelAntiqueCollect\r\nconst DelAntiqueCollect = (data) => instance.put(\"/Antique/DelAntiqueCollect\",data)\r\n\r\n\r\n// Antique/EditAntiqueById\r\nconst EditAntiqueById = (data) => instance.put(\"/Antique/EditAntiqueById\",data)\r\n\r\nconst GetStoreForAntique = (data) => instance.get(\"/Antique/GetStoreForAntique\",{params:{...data}})\r\n\r\n// DelAntiqueBindStore\r\nconst DelAntiqueBindStore = (data) => instance.put(\"/Antique/DelAntiqueBindStore\",data)\r\n\r\n// AddAntiqueBindStore\r\nconst AddAntiqueBindStore = (data) => instance.put(\"/Antique/AddAntiqueBindStore\",data)\r\n\r\n// GetMyBindStoreById\r\nconst GetMyBindStoreById = (data) => instance.get(\"/Antique/GetMyBindStoreById\",{params:{...data}})\r\n\r\n// DeleteGoodsPic\r\nconst DeleteGoodsPic = (data) => instance.delete(\"/StoreItem/DeleteGoodsPic\",{params:{...data}})\r\n\r\nconst DelAntique = (data) => instance.delete(\"/Antique/DelAntique\",{params:{...data}})\r\n\r\nconst DeleteStoreCarouselPic = (data) => instance.delete(\"/Store/DeleteStoreCarouselPic\",{params:{...data}})\r\n\r\nconst GetAllCommunity = (data) => instance.get(\"/Community/GetAllCommunity\",{params:{...data}})\r\n\r\nconst UpdateCommunityStatus = (data) => instance.post(\"/Community/UpdateCommunityStatus\",data)\r\n// DeleteCommunity\r\nconst DeleteCommunity = (data) => instance.delete(\"/Community/DeleteCommunity\",{params:{...data}})\r\n\r\n// GetYearStoreStatics\r\nconst GetYearStoreStatics = (data) => instance.get(\"/Finance/GetYearStoreStatics\",{params:{...data}})\r\n// GetBillsStatistics\r\nconst GetBillsStatistics = (data) => instance.get(\"/Finance/GetBillsStatistics\",{params:{...data}})\r\n// GetTotalStoreStatics\r\nconst GetTotalStoreStatics = (data) => instance.get(\"/Finance/GetTotalStoreStatics\",{params:{...data}})\r\n// GetYearStoreStaticsByYear\r\nconst GetYearStoreStaticsByYear = (data) => instance.get(\"/Finance/GetYearStoreStaticsByYear\",{params:{...data}})\r\n// /StoreItem/buyGoodsAllToExcel\r\nconst buyGoodsAllToExcel = (data) => instance.get(\"/StoreItem/buyGoodsAllToExcel\",{params:{...data},responseType:\"blob\"})\r\n\r\n// buyGoodsToExcelById\r\nconst buyGoodsToExcelById = (data) => instance.get(\"/StoreItem/buyGoodsToExcelById\",{params:{...data},responseType:\"blob\"})\r\n\r\nexport {\r\n    buyGoodsToExcelById,\r\n    buyGoodsAllToExcel,\r\n    GetYearStoreStatics,\r\n    GetBillsStatistics,\r\n    GetTotalStoreStatics,\r\n    GetYearStoreStaticsByYear,\r\n\r\n    GetAllCommunity,\r\n    UpdateCommunityStatus,\r\n    DeleteCommunity,\r\n\r\n    DelAntique,\r\n    DeleteGoodsPic,\r\n    DeleteStoreCarouselPic,\r\n\r\n    AddAntiqueBindStore,\r\n    DelAntiqueBindStore,\r\n    GetMyBindStoreById,\r\n\r\n    GetStoreForAntique,\r\n    EditAntiqueById,\r\n    DelAntiqueCollect,\r\n    EditCollectById,\r\n    GetCollectById,\r\n    FindAntiqueById,\r\n    AddAntiqueCollect,\r\n    GetAntiqueCollect,\r\n    AntiqueLogin,\r\n    AddAntique,\r\n    GetAntiqueAll,\r\n\r\n    DelStore,\r\n    getStoreById,\r\n    editStoreById,\r\n    getAllStoreAccount,\r\n    buyGoodsAll,\r\n    editBuyGoodsState2,\r\n    AddStore,\r\n    loadStoreInfo,\r\n    loadStoreInfoById,\r\n    GetStoreNames,\r\n    AddStoreItem,\r\n    EditStoreItem,\r\n    DeleteStoreItem\r\n}","<template>\r\n    <div class=\"page\">\r\n        <el-container class=\"main-container\">\r\n            <el-main class=\"main-content\">\r\n                <el-row class=\"info-row\">\r\n                    <el-col :span=\"8\">\r\n                        <el-image :src=\"model.src\" class=\"museum-avatar\" fit=\"cover\"></el-image>\r\n                        <p style=\"margin: 10px 0;\">账号：{{ model.account }}</p>\r\n                        <el-button type=\"primary\" @click=\"openEditDialog\">编辑信息</el-button>\r\n                    </el-col>\r\n                    <el-col :span=\"16\">\r\n                        <el-carousel :interval=\"4000\" type=\"card\" height=\"230px\" style=\"margin-bottom: 20px;\" loop>\r\n                            <el-carousel-item v-for=\"item in model.carousel\" :key=\"item.id\">\r\n                                <el-image :src=\"item.src\"></el-image>\r\n                            </el-carousel-item>\r\n                        </el-carousel>\r\n                        <el-card class=\"museum-info-card\">\r\n                            <h2>{{ model.name }}</h2>\r\n                            <p style=\"margin: 10px 0 20px 0\">联系电话：{{ model.tel }}</p>\r\n                            <p style=\"margin: 10px 0 20px 0\">商铺简介：{{ model.description }}</p>\r\n                        </el-card>\r\n                    </el-col>\r\n                </el-row>\r\n            </el-main>\r\n            <el-dialog title=\"编辑商铺\" v-model=\"isEditDialogVisible\" @close=\"cancel\">\r\n                <el-form :model=\"editForm\" label-width=\"100px\" :rules=\"rules\" ref=\"form\">\r\n                    <el-form-item label=\"商铺名\" prop=\"name\">\r\n                        <el-input v-model=\"editForm.name\" placeholder=\"请输入店铺名称\"></el-input>\r\n                    </el-form-item>\r\n                    <!-- 账户密码 -->\r\n                    <el-form-item label=\"账户\" prop=\"account\">\r\n                        <el-input v-model=\"editForm.account\" placeholder=\"请输入账户\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"密码\" prop=\"password\">\r\n                        <el-input v-model=\"editForm.password\" placeholder=\"请输入密码\"></el-input>\r\n                    </el-form-item>\r\n                    <!-- 手机号码 -->\r\n                    <el-form-item label=\"手机号码\" prop=\"tel\">\r\n                        <el-input v-model=\"editForm.tel\" placeholder=\"请输入手机号码\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"描述\" prop=\"description\">\r\n                        <el-mention type=\"textarea\" :rows=\"4\" v-model=\"editForm.description\"\r\n                            placeholder=\"请输入店铺描述\"></el-mention>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"头像\" prop=\"src\">\r\n                        <el-upload class=\"avatar-uploader\" :action=\"baseUrl + '/admin/upload'\" name=\"storeAvatar\"\r\n                            auto-upload=\"false\" :show-file-list=\"false\" :on-success=\"handleAvatarSuccess\"\r\n                            :before-upload=\"beforeAvatarUpload\">\r\n                            <img v-if=\"editForm.src\" :src=\"editForm.src\" class=\"avatar\" />\r\n                            <el-icon v-else class=\"avatar-uploader-icon\">\r\n                                <Plus />\r\n                            </el-icon>\r\n                        </el-upload>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"轮播图\" prop=\"carousel\">\r\n                        <el-upload v-model:file-list=\"fileList\"\r\n                            :action=\"baseUrl + '/admin/upload'\" name=\"storeAvatar\"\r\n                            list-type=\"picture-card\" :on-remove=\"handleRemove\" limit=\"5\"\r\n                            :on-success=\"handleAvatarSuccess2\">\r\n                            <el-icon>\r\n                                <Plus />\r\n                            </el-icon>\r\n                        </el-upload>\r\n                    </el-form-item>\r\n                </el-form>\r\n                <template #footer>\r\n                    <el-button @click=\"cancel\">取 消</el-button>\r\n                    <el-button type=\"primary\" @click=\"handleOk\">确 定</el-button>\r\n                </template>\r\n            </el-dialog>\r\n        </el-container>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport storage from '@/storage/storage';\r\nimport { editStoreById, getStoreById, DeleteStoreCarouselPic } from '@/util/api';\r\nimport { baseUrl } from '@/util/baseConfig';\r\nimport { Plus } from '@element-plus/icons-vue';\r\nimport { ElMessage } from 'element-plus';\r\nimport { reactive, ref } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\n\r\nconst rules = reactive({\r\n    name: [\r\n        { required: true, message: '请输入商铺名', trigger: 'blur' }\r\n    ],\r\n    src: [\r\n        { required: true, message: '请上传图片', trigger: 'blur' }\r\n    ],\r\n    description: [\r\n        { required: true, message: '请输入描述', trigger: 'blur' }\r\n    ],\r\n    account: [\r\n        { required: true, message: '请输入账户', trigger: 'blur' }\r\n    ],\r\n    password: [\r\n        { required: false, message: '请输入密码', trigger: 'blur' }\r\n    ],\r\n    tel: [\r\n        {\r\n            required: true, message: '请输入手机号码', trigger: 'blur',\r\n            validator: (rule, value, callback) => {\r\n                if (value == '') {\r\n                    callback(new Error('请输入手机号码'))\r\n                } else {\r\n                    if (!/^1[3456789]\\d{9}$/.test(value)) {\r\n                        callback(new Error('请输入正确的手机号码'))\r\n                    } else {\r\n                        callback()\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    ],\r\n    carousel: [\r\n        { required: true, message: '请上传轮播图', trigger: 'blur' }\r\n    ]\r\n})\r\nconst data = JSON.parse(storage.ls.get(\"user\"))\r\nconst form = ref(null)\r\nconst model = reactive({\r\n    id: \"\",\r\n    name: \"\",\r\n    src: \"\",\r\n    description: \"\",\r\n    account: \"\",\r\n    password: \"\",\r\n    tel: \"\",\r\n    carousel: []\r\n})\r\nconst handleRemove = (file,) => {\r\n    // 发送删除的请求\r\n    if (file.uid != null) {\r\n        // 发送删除的请求(轮播图)\r\n        DeleteStoreCarouselPic({ id: file.uid }).then((res) => {\r\n            editForm.value.carousel = editForm.value.carousel.filter(item => item.src != res.data)\r\n        })\r\n    }\r\n}\r\nconst handleAvatarSuccess2 = (\r\n    res,\r\n) => {\r\n    console.log(res, 'file carousel');\r\n    editForm.value.carousel.push({ src: res.data })\r\n}\r\nconst fileList = ref([])\r\n\r\nconst loadData = () => {\r\n    // 调用接口获取数据\r\n    getStoreById({\r\n        id: data.id\r\n    }).then((res) => {\r\n        Object.keys(model).forEach(key => {\r\n            model[key] = res.data[key]\r\n        })\r\n    }).catch((err) => {\r\n        console.log(err)\r\n    })\r\n}\r\nconst loadData2 = () => {\r\n    // 调用接口获取数据\r\n    getStoreById({\r\n        id: data.id\r\n    }).then((res) => {\r\n        // model.value = res.data\r\n        Object.keys(model).forEach(key => {\r\n            if (key == 'carousel') {\r\n                model[key] = res.data[key]?.map(item => ({ src: item.src, id: item.id })) || []\r\n                editForm.value.carousel = res.data[key]?.map(item => ({ src: item.src, id: item.id })) || []\r\n                return\r\n            }\r\n            model[key] = res.data[key]\r\n            editForm.value[key] = res.data[key]\r\n        })\r\n        fileList.value.splice(0, fileList.value.length)\r\n        fileList.value.push(...res.data.carousel.map(item => ({\r\n            uid: item.id,\r\n            url: item.src,\r\n        })))\r\n        isEditDialogVisible.value = true\r\n        console.log(editForm, 'form');\r\n\r\n    }).catch((err) => {\r\n        console.log(err)\r\n    })\r\n}\r\n// 控制Dialog显示隐藏\r\nconst isEditDialogVisible = ref(false)\r\nconst cancel = () => {\r\n    isEditDialogVisible.value = false\r\n\r\n    editForm.value.name = \"\"\r\n    editForm.value.src = \"\"\r\n    editForm.value.description = \"\"\r\n    editForm.value.account = \"\"\r\n    editForm.value.password = \"\"\r\n    editForm.value.tel = \"\"\r\n    fileList.value.splice(0, fileList.value.length)\r\n}\r\n\r\n// 编辑表单数据，初始值为当前展示的博物馆信息\r\nconst editForm = ref({\r\n    name: \"\",\r\n    src: \"\",\r\n    description: \"\",\r\n    account: \"\",\r\n    password: \"\",\r\n    tel: \"\"\r\n})\r\nconst beforeAvatarUpload = (rawFile) => {\r\n    if (!(rawFile.type == 'image/jpeg' || rawFile.type == 'image/png')) {\r\n        ElMessage.error('Avatar picture must be JPG | PNG format!')\r\n        return false\r\n    }\r\n    if (rawFile.size / 1024 / 1024 > 4) {\r\n        ElMessage.error('Avatar picture size can not exceed 4MB!')\r\n        return false\r\n    }\r\n    return true\r\n}\r\nconst handleAvatarSuccess = (\r\n    res,\r\n) => {\r\n    editForm.value.src = res.data\r\n}\r\n\r\n// 打开编辑Dialog的方法\r\nconst openEditDialog = () => {\r\n    loadData2()\r\n}\r\n\r\n// 保存编辑的方法\r\nconst handleOk = () => {\r\n    form.value.validate((valid) => {\r\n        if (valid) {\r\n            // 发送请求\r\n            if (model.id == null || model.id == '') {\r\n                ElMessage.warning(\"请重新登录\")\r\n            } else {\r\n                let d = {}\r\n                Object.keys(editForm.value).forEach((key) => {\r\n                    if (model[key] != editForm.value[key]) {\r\n                        d[key] = editForm.value[key]\r\n                    }\r\n                })\r\n                if (Object.keys(d).length == 0) {\r\n                    isEditDialogVisible.value = false\r\n                    cancel()\r\n                    return\r\n                }\r\n                // 修改\r\n                editStoreById({\r\n                    ...d,\r\n                    id: model.id\r\n                }).then((res) => {\r\n                    console.log(res)\r\n                    isEditDialogVisible.value = false\r\n                    loadData()\r\n                    cancel()\r\n                })\r\n            }\r\n\r\n        }\r\n    })\r\n\r\n}\r\nloadData()\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n// @import \"../../general/page.css\";\r\n\r\n.page {\r\n    //   background: rgba(0, 0, 0, .1);\r\n    padding: 10px;\r\n    overflow-y: auto;\r\n    padding-bottom: 100px;\r\n    width: 100%;\r\n    box-sizing: border-box;\r\n    max-height: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.el-input,\r\n.el-select {\r\n    width: 200px;\r\n}\r\n\r\n.main-container {\r\n    min-height: 100vh;\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n\r\n.header {\r\n    background-color: #333;\r\n    color: white;\r\n    text-align: center;\r\n    line-height: 60px;\r\n}\r\n\r\n.main-content {\r\n    padding: 20px;\r\n}\r\n\r\n.info-row {\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\n.museum-avatar {\r\n    width: 300px;\r\n    height: 300px;\r\n    border-radius: 20px;\r\n    margin: 0 auto;\r\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.museum-info-card {\r\n    padding: 20px;\r\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\r\n    border-radius: 5px;\r\n}\r\n\r\n.avatar-uploader .el-upload {\r\n    border: 1px dashed var(--el-border-color);\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    width: 200px;\r\n    height: 200px;\r\n\r\n    position: relative;\r\n    overflow: hidden;\r\n    transition: var(--el-transition-duration-fast);\r\n}\r\n\r\n.avatar-uploader {\r\n    width: 200px;\r\n    height: 200px;\r\n    border: 1px dashed var(--el-border-color);\r\n}\r\n\r\n.avatar-uploader .el-upload:hover {\r\n    border-color: var(--el-color-primary);\r\n}\r\n\r\n.avatar {\r\n    width: 200px;\r\n    height: 200px;\r\n}\r\n\r\n.el-icon,\r\n.avatar-uploader-icon {\r\n    width: 200px;\r\n    height: 200px;\r\n}\r\n\r\n.el-icon.avatar-uploader-icon {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    width: 200px;\r\n    height: 200px;\r\n    text-align: center;\r\n}\r\n\r\n.el-scrollbar__wrap--hidden-default {\r\n    text-align: start;\r\n}\r\n\r\n\r\n.el-carousel__item h3 {\r\n  color: #475669;\r\n  opacity: 0.75;\r\n  line-height: 200px;\r\n  margin: 0;\r\n  text-align: center;\r\n}\r\n\r\n.el-carousel__item:nth-child(2n) {\r\n  background-color: #99a9bf;\r\n}\r\n\r\n.el-carousel__item:nth-child(2n + 1) {\r\n  background-color: #d3dce6;\r\n}\r\n</style>","import script from \"./myStoreInfo.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./myStoreInfo.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./myStoreInfo.vue?vue&type=style&index=0&id=4e549f19&scoped=true&lang=less\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4e549f19\"]])\n\nexport default __exports__"],"names":["loadStoreInfo","data","instance","get","params","loadStoreInfoById","GetStoreNames","AddStoreItem","post","EditStoreItem","DeleteStoreItem","AddStore","buyGoodsAll","editBuyGoodsState2","put","getAllStoreAccount","getStoreById","editStoreById","DelStore","delete","AddAntique","GetAntiqueAll","AntiqueLogin","GetAntiqueCollect","AddAntiqueCollect","FindAntiqueById","GetCollectById","EditCollectById","DelAntiqueCollect","EditAntiqueById","GetStoreForAntique","DelAntiqueBindStore","AddAntiqueBindStore","GetMyBindStoreById","DeleteGoodsPic","DelAntique","DeleteStoreCarouselPic","GetAllCommunity","UpdateCommunityStatus","DeleteCommunity","GetYearStoreStatics","GetBillsStatistics","GetTotalStoreStatics","GetYearStoreStaticsByYear","buyGoodsAllToExcel","responseType","buyGoodsToExcelById","rules","reactive","name","required","message","trigger","src","description","account","password","tel","validator","rule","value","callback","Error","test","carousel","JSON","parse","storage","ls","form","ref","model","id","handleRemove","file","uid","then","res","editForm","filter","item","handleAvatarSuccess2","console","log","push","fileList","loadData","Object","keys","forEach","key","catch","err","loadData2","map","splice","length","url","isEditDialogVisible","cancel","beforeAvatarUpload","rawFile","type","ElMessage","error","size","handleAvatarSuccess","openEditDialog","handleOk","validate","valid","warning","d","__exports__"],"sourceRoot":""}